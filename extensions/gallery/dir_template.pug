doctype html
html
  head
    meta(charset="utf8")
    title Wallpapers (#{dirname})
    base(target="_blank")
    meta(name="viewport",content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0")
    style.
      .main, body, html { padding: 0; margin: 0; background-color: #2f2f2f; }
      body { overflow-x: hidden; }
      .main { display: flex; flex-wrap: wrap; align-content: flex-start; }
      @media only screen and (min-width: 1300px) { .item { width: 33.3333333%; padding-bottom: 18.75%; } }
      @media only screen and (max-width: 1299px) { .item { width: 50%; padding-bottom: 28.125%; } }
      @media only screen and (max-width: 699px) { .item { width: 100%; padding-bottom: 56.25%; } }
      .item { margin: 0; height: 0; display: inline-block; background-position: center; }
      .item { background-size: cover; background-repeat: no-repeat; opacity: 0; transition: opacity .5s; }
      .copy { color: #fff; position: fixed; right: 20px; bottom: 20px; background-color: rgba(0, 0, 0, .5); }
      .copy { padding: 5px 10px; }
  body
    .main
      - for (let id = 1; id <= picnumber; ++ id)
        a.item(data-id=id)
    .copy Source From Liuli Shrine
    script.
      var preload = function preload(url, callback) {
        var image = new Image();
        image.src = url;
        image.onload = callback;
        image.onerror = console.error;
      };

      var fuckIE = function fuckIE(elem) {
        var id = elem.getAttribute('data-id');
        elem.href = id + '.jpg';
        preload(id + '-thumbnail.jpg', function () {
          elem.style.backgroundImage = 'url(' + id + '-thumbnail.jpg)';
          elem.style.opacity = '1';
        });
      };

      var elems = document.querySelectorAll('a.item');
      for (var i = 0; i < elems.length; ++ i) {
        fuckIE(elems[i]);
      }
